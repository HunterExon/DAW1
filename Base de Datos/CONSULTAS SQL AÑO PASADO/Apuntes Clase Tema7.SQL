--BORRAR TABLA
DROP TABLE ALUMNOS;

--CREAR TABLA
CREATE TABLE ASIGNATURAS
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15),
	NUMHORAS NUMBER(2)
);

INSERT INTO ASIGNATURAS
VALUES(1, 'BD', 6);

INSERT INTO ASIGNATURAS
VALUES(2, 'PRO', 8);

INSERT INTO ASIGNATURAS
VALUES(3, 'SIS', 6);

INSERT INTO ASIGNATURAS(COD, NUMHORAS)
VALUES(4, 3);

--RESTRICCION NOT NULL
DROP TABLE ASIGNATURAS;

CREATE TABLE ASIGNATURAS
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15)	NOT NULL,
	NUMHORAS NUMBER(2)
);

--RESTRICCION CHECK
DROP TABLE ASIGNATURAS;

CREATE TABLE ASIGNATURAS
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15)	NOT NULL,
	NUMHORAS NUMBER(2)	CHECK(NUMHORAS > 2)
);

INSERT INTO ASIGNATURAS
VALUES(1, 'BD', 6);

INSERT INTO ASIGNATURAS
VALUES(2, 'PRO', 8);

INSERT INTO ASIGNATURAS
VALUES(3, 'SIS', 6);

INSERT INTO ASIGNATURAS
VALUES(4, 'FOL', 2);


--RESTRICCION DEFAULT
CREATE TABLE PROFESOR
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15),
	TELEF	CHAR(3)		DEFAULT '123'
);

INSERT INTO PROFESOR
VALUES(10, 'PEPE', 128);

INSERT INTO PROFESOR(COD, NOMBRE)
VALUES(20, 'ROSA');

INSERT INTO PROFESOR
VALUES(20, 'EVA', 333);


--RESTRICCION PRIMARY KEY.(RESTRICCION DE COLUMNA)
CREATE TABLE PROFESOR
(
	COD		NUMBER(2)	PRIMARY KEY,
	NOMBRE	VARCHAR2(15),
	TELEF	CHAR(3)		DEFAULT '123'
);

INSERT INTO PROFESOR
VALUES(10, 'PEPE', 128);

INSERT INTO PROFESOR(COD, NOMBRE)
VALUES(20, 'ROSA');

INSERT INTO PROFESOR
VALUES(20, 'EVA', 333);

INSERT INTO PROFESOR(NOMBRE, TELEF)
VALUES('ISA', 444);

--RESTRICCION PRIMARY KEY.(RESTRICCION DE TABLA)
CREATE TABLE CURSO
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15),
	PRIMARY KEY(COD)
);

INSERT INTO CURSO
VALUES(11, '1ºDAM');

INSERT INTO CURSO
VALUES(11, '2ºDAM');

--RESTRICCION DE TABLA CHECK
CREATE TABLE ASIGNATURAS
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15)	NOT NULL,
	NUMHORAS NUMBER(2),
	CHECK(NUMHORAS > 2)
);

INSERT INTO ASIGNATURAS
VALUES(1, 'BD', 6);

INSERT INTO ASIGNATURAS
VALUES(2, 'PRO', 8);

INSERT INTO ASIGNATURAS
VALUES(3, 'SIS', 6);

INSERT INTO ASIGNATURAS
VALUES(4, 'FOL', 2);


--RESTRICCION UNIQUE
CREATE TABLE CURSO
(
	COD		NUMBER(2),
	NOMBRE	VARCHAR2(15)	UNIQUE,
	PRIMARY KEY(COD)
);

INSERT INTO CURSO
VALUES(11, '1ºDAM');

INSERT INTO CURSO
VALUES(11, '2ºDAM');

INSERT INTO CURSO
VALUES(12, '1ºDAM');

INSERT INTO CURSO(COD)
VALUES(13);


-- DAR NOMBRE A RESTRICCION (CONSTRAINT).
CREATE TABLE ALUMNOS
(
	COD		NUMBER(2)		CONSTRAINT PK_ALU PRIMARY KEY,
	NOMBRE	VARCHAR2(15),
	EDAD	NUMBER(2),
	CURSO	NUMBER(2)
);


INSERT INTO ALUMNOS
VALUES(21, 'ANA', 25, 11);

INSERT INTO ALUMNOS
VALUES(22, 'JOSE', 19, 13);

INSERT INTO ALUMNOS
VALUES(21, 'LUIS', 20, 11);


-- CLAVE AJENA (FOREIGN KEY)
CREATE TABLE ALUMNOS
(
	COD		NUMBER(2)		CONSTRAINT PK_ALU PRIMARY KEY,
	NOMBRE	VARCHAR2(15),
	EDAD	NUMBER(2),
	CURSO	NUMBER(2)		CONSTRAINT FK_ALU REFERENCES CURSO
);


INSERT INTO ALUMNOS
VALUES(21, 'ANA', 25, 11);

INSERT INTO ALUMNOS
VALUES(22, 'JOSE', 19, 13);

INSERT INTO ALUMNOS
VALUES(21, 'LUIS', 20, 11);

INSERT INTO ALUMNOS
VALUES(23, 'MARIA', 20, 50);

--RESTRICCION DE TABLA FOREIGN KEY Y BORRADO EN CASCADA (ON DELETE CASCADE).
CREATE TABLE ALUMNOS
(
	COD		NUMBER(2)		CONSTRAINT PK_ALU PRIMARY KEY,
	NOMBRE	VARCHAR2(15),
	EDAD	NUMBER(2),
	CURSO	NUMBER(2),
	CONSTRAINT FK_ALU FOREIGN KEY(CURSO) REFERENCES CURSO ON DELETE CASCADE
);

INSERT INTO ALUMNOS
VALUES(21, 'ANA', 25, 11);

INSERT INTO ALUMNOS
VALUES(22, 'JOSE', 19, 13);

INSERT INTO ALUMNOS
VALUES(24, 'PEDRO', 20, 11);

DELETE FROM CURSO
WHERE COD = 11;

--BORRAR TABLA (DROP TABLE)
DROP TABLE CURSO;

DROP TABLE CURSO CASCADE CONSTRAINT; --BORRAR TABLA Y TODAS LAS RESTRICCION


-- TEMA 7
7.1, 
7.2 -> NO 'PUNTO C',
7.3